<!doctype html>
<head>
    <meta charset="utf-8">
    <title>DYSCOVR</title>
    
    <style>
        html,body{
            padding:0;
            margin:0;
            background: #375949
        }
        canvas, img {
            image-rendering: optimizeSpeed;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: optimize-contrast;
            image-rendering: pixelated;
            -ms-interpolation-mode: nearest-neighbor;
        }
        canvas{
            top:0;
            left:0; /* 1-split */
            right:0;
            bottom:0;
            margin:auto;
            background: #F0F;
        }

        #main{
            display:block;
            position:absolute;
            background:#FF0;

            width:43.75%; /* 1-split */

            top:0;
            left:0;
            right:56.25%; /* split */
            bottom:0;
        }

        #display{
            display:block;
            position:absolute;
            background:#0F0;

            width:56.25%; /* 1-split */

            top:0;
            left:43.75%;
            right:0; /* split */
            bottom:0;
        }

        #second{
            display:none;
        }

        #third{
            display:none;
        }
    </style>
    
    <!-- VENDOR SCRIPTS -->
    <script src="vendor/pixi.min.js"></script>
    <script src="vendor/howler.min.js"></script>
    <script src="vendor/jquery-3.1.0.min.js"></script>
</head>

<body>

    <!-- HTML SECTION -->
    <section id="main">
        <div>
            welcome to DYSCOVR
        </div>

        <h3>Messages</h3>
        <div id="messages">
            messages or whatever
        </div>
        <button onclick="getMessages($('input').val(),'timestamp','ASC',function(data){$('#messages').html(data)});">get messages</button>

        <div>
            <h3>Write a message</h3>
            <select id="first">
                <option value="">---</option>
            </select>
            <select id="second">
                <option value="">---</option>
            </select>
            <select id="third">
                <option value="">---</option>
            </select>
            <br/><br/>
            <label>artifact (this'll be an in-game thing later)<input id="artifact" value=4 /></label>
            <br/><br/>
            <button onclick="postMessage($('#first').find('option:selected').text()+' '+$('#second').find('option:selected').text()+' '+$('#third').find('option:selected').text()+".", $('#artifact').val());">post a message</button>
        </div>
    </section>
        </div>
    </section>

<script>
	file1="";
    file2="";

    $(document).ready(function(){
        $.getJSON("assets/words/words.json", function(data){
            $('#first').empty();
            $('#first').append($('<option>').text("---"));
            $.each( data.first, function( key, val ) {
                    $('#first').append($('<option>').text(val).attr('value', key));
            });
        });
    });

    $('#first').change(function() {
        $('#second').show();
        $('#third').hide();

        $.getJSON("assets/words/words.json", function(data){
            $('#second').empty();
            $('#second').append($('<option>').text("---"));
            
            if ($('#first').val() === '0') {
                $.each( data.second1, function( key, val ) {
                    $('#second').append($('<option>').text(val).attr('value', key));
                });
            } else if ($('#first').val() === '1') {
                $.each( data.second2, function( key, val ) {
                $('#second').append($('<option>').text(val).attr('value', key));
                });
            } 
        });
    });

    $('#second').change(function() {
        $('#third').show();

        $.getJSON("assets/words/words.json", function(data){
            $('#third').empty();
            $('#third').append($('<option>').text("---"));
            if ($('#first').val() === '0') {
                $.each( data.third1, function( key, val ) {
                    $('#third').append($('<option>').text(val).attr('value', key));
                });
            } else if ($('#first').val() === '1') {
                $.each( data.third2, function( key, val ) {
                $('#third').append($('<option>').text(val).attr('value', key));
                });
            } 
        });
    });
</script>

    <!-- CLIENT SCRIPTS -->
    <script src="client/utils.js"></script>
    <script src="client/fractals.js"></script>
    <script src="client/client.js"></script>
    <script src="client/input.js"></script>
    <script src="client/artifacts.js"></script>
    <script src="client/index.js" async></script>

    <!-- PIXI CANVAS ENDS UP HERE -->
    <section id="display"></section>
</body>